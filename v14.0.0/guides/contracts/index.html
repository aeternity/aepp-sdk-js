
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../aens/">
      
      
        <link rel="next" href="../contract-events/">
      
      
      <link rel="icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.26">
    
    
      
        <title>Contracts - æternity JavaScript SDK</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#contracts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
               You're not viewing the latest version.
<a href="../../..">
  <strong>Click here to go to latest.</strong>
</a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="æternity JavaScript SDK" class="md-header__button md-logo" aria-label="æternity JavaScript SDK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            æternity JavaScript SDK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Contracts
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aeternity/aepp-sdk-js" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="æternity JavaScript SDK" class="md-nav__button md-logo" aria-label="æternity JavaScript SDK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    æternity JavaScript SDK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aeternity/aepp-sdk-js" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick-start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Usage Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Usage Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../address-length/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The range of possible address length
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aens/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AENS (æternity naming system)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Contracts
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Contracts
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-specify-imports" class="md-nav__link">
    <span class="md-ellipsis">
      1. Specify imports
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-setup-compiler" class="md-nav__link">
    <span class="md-ellipsis">
      2. Setup compiler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-create-an-instance-of-the-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      3. Create an instance of the SDK
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-initialize-the-contract-instance" class="md-nav__link">
    <span class="md-ellipsis">
      4. Initialize the contract instance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Initialize the contract instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#by-source-code" class="md-nav__link">
    <span class="md-ellipsis">
      By source code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#by-path-to-source-code-available-only-in-nodejs" class="md-nav__link">
    <span class="md-ellipsis">
      By path to source code (available only in Node.js)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#by-aci-and-bytecode" class="md-nav__link">
    <span class="md-ellipsis">
      By ACI and bytecode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#by-aci-and-contract-address" class="md-nav__link">
    <span class="md-ellipsis">
      By ACI and contract address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-contract-instance" class="md-nav__link">
    <span class="md-ellipsis">
      Create contract instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options" class="md-nav__link">
    <span class="md-ellipsis">
      Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keep-bytecode-and-aci-for-future-use" class="md-nav__link">
    <span class="md-ellipsis">
      Keep bytecode and ACI for future use
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-deploy-the-contract" class="md-nav__link">
    <span class="md-ellipsis">
      5. Deploy the contract
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-call-contract-entrypoints" class="md-nav__link">
    <span class="md-ellipsis">
      6. Call contract entrypoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Call contract entrypoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-stateful-entrypoints" class="md-nav__link">
    <span class="md-ellipsis">
      a) Stateful entrypoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-regular-entrypoints" class="md-nav__link">
    <span class="md-ellipsis">
      b) Regular entrypoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-payable-entrypoints" class="md-nav__link">
    <span class="md-ellipsis">
      c) Payable entrypoints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-options" class="md-nav__link">
    <span class="md-ellipsis">
      Transaction options
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sophia-datatype-cheatsheet" class="md-nav__link">
    <span class="md-ellipsis">
      Sophia datatype cheatsheet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-file-system-object-in-nodejs" class="md-nav__link">
    <span class="md-ellipsis">
      Generate file system object in Node.js
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contract-events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contract Events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../oracles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Oracles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../paying-for-tx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PayingForTx (Meta-Transactions)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../batch-requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Batch Transactions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../error-handling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error Handling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../low-vs-high-usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Low vs High level API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../typed-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Typed data hashing and signing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jwt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JWT usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Wallet interaction
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            Wallet interaction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connect-aepp-to-wallet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connect an æpp to a wallet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../build-wallet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to build a wallet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ledger-wallet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ledger Hardware Wallet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../metamask-snap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aeternity snap for MetaMask
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transaction-options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transaction options
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples & Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Examples & Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    NodeJS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            NodeJS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/node/transfer-ae/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transfer AE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/node/contract-interaction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compile &amp; Deploy a Sophia Smart Contract
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_3" >
        
          
          <label class="md-nav__link" for="__nav_5_1_3" id="__nav_5_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PayingForTx
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_3">
            <span class="md-nav__icon md-icon"></span>
            PayingForTx
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/node/paying-for-contract-call-tx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    InnerTx: ContractCallTx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/node/paying-for-spend-tx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    InnerTx: SpendTx
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/node/account-generalized/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create and use Generalized Accounts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/node/dry-run-using-debug-endpoint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dry-run using debug endpoint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/node/oracle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Register and query Oracle
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Browser
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Browser
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/browser/tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SDK tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/browser/aepp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aepp example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/browser/wallet-iframe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iframe wallet example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/browser/wallet-web-extension/packed.zip" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Webextension wallet example
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/vuejs/helloworld-blockheight/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vue.js HelloWorld
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compatibility/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compatibility Table
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CHANGELOG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Migration Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Migration Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration/14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration to 14.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration/13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration to 13.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration/12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration to 12.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration/11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration to 11.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration/10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration to 10.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration/9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration to 9.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration/7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration to 7.0.0
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contribute
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Contribute
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contrib/releases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Releases
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-specify-imports" class="md-nav__link">
    <span class="md-ellipsis">
      1. Specify imports
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-setup-compiler" class="md-nav__link">
    <span class="md-ellipsis">
      2. Setup compiler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-create-an-instance-of-the-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      3. Create an instance of the SDK
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-initialize-the-contract-instance" class="md-nav__link">
    <span class="md-ellipsis">
      4. Initialize the contract instance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Initialize the contract instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#by-source-code" class="md-nav__link">
    <span class="md-ellipsis">
      By source code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#by-path-to-source-code-available-only-in-nodejs" class="md-nav__link">
    <span class="md-ellipsis">
      By path to source code (available only in Node.js)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#by-aci-and-bytecode" class="md-nav__link">
    <span class="md-ellipsis">
      By ACI and bytecode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#by-aci-and-contract-address" class="md-nav__link">
    <span class="md-ellipsis">
      By ACI and contract address
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-contract-instance" class="md-nav__link">
    <span class="md-ellipsis">
      Create contract instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options" class="md-nav__link">
    <span class="md-ellipsis">
      Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keep-bytecode-and-aci-for-future-use" class="md-nav__link">
    <span class="md-ellipsis">
      Keep bytecode and ACI for future use
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-deploy-the-contract" class="md-nav__link">
    <span class="md-ellipsis">
      5. Deploy the contract
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-call-contract-entrypoints" class="md-nav__link">
    <span class="md-ellipsis">
      6. Call contract entrypoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Call contract entrypoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-stateful-entrypoints" class="md-nav__link">
    <span class="md-ellipsis">
      a) Stateful entrypoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-regular-entrypoints" class="md-nav__link">
    <span class="md-ellipsis">
      b) Regular entrypoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-payable-entrypoints" class="md-nav__link">
    <span class="md-ellipsis">
      c) Payable entrypoints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transaction-options" class="md-nav__link">
    <span class="md-ellipsis">
      Transaction options
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sophia-datatype-cheatsheet" class="md-nav__link">
    <span class="md-ellipsis">
      Sophia datatype cheatsheet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-file-system-object-in-nodejs" class="md-nav__link">
    <span class="md-ellipsis">
      Generate file system object in Node.js
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="contracts">Contracts</h1>
<h2 id="introduction">Introduction</h2>
<p>The smart contract language of the æternity blockchain is <a href="https://docs.aeternity.com/aesophia">Sophia</a>. It is a functional language in the ML family, strongly typed and has restricted mutable state.</p>
<p>Before interacting with contracts using the SDK you should get familiar with Sophia itself first. Have a look into <a href="https://github.com/aeternity/aepp-sophia-examples">aepp-sophia-examples</a> and start rapid prototyping using <a href="https://studio.aepps.com">AEstudio</a>.</p>
<h2 id="1-specify-imports">1. Specify imports</h2>
<div class="highlight"><pre><span></span><code><span class="c1">// node.js import</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AeSdk</span><span class="p">,</span><span class="w"> </span><span class="nx">MemoryAccount</span><span class="p">,</span><span class="w"> </span><span class="nx">Node</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@aeternity/aepp-sdk&#39;</span><span class="p">);</span>
<span class="c1">// ES import</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">AeSdk</span><span class="p">,</span><span class="w"> </span><span class="nx">MemoryAccount</span><span class="p">,</span><span class="w"> </span><span class="nx">Node</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@aeternity/aepp-sdk&#39;</span><span class="p">;</span>
<span class="c1">// additionally you may need to import CompilerCli or CompilerHttp</span>
</code></pre></div>
<h2 id="2-setup-compiler">2. Setup compiler</h2>
<p>Compiler primarily used to generate bytecode to deploy a contract.
Skip this step if you have a contract bytecode or need to interact with an already deployed contract.
Out-of-the-box SDK supports <a href="https://github.com/aeternity/aesophia_cli">aesophia_cli</a> and <a href="https://github.com/aeternity/aesophia_http">aesophia_http</a> implemented in <a href="https://docs.aeternity.com/aepp-sdk-js/v13.2.2/api/classes/CompilerCli.html">CompilerCli</a> and <a href="https://docs.aeternity.com/aepp-sdk-js/v13.2.2/api/classes/CompilerHttp.html">CompilerHttp</a> respectively.</p>
<p>CompilerCli is available only in Node.js and requires Erlang installed (<code>escript</code> available in <code>$PATH</code>), Windows is supported.</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">compiler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CompilerCli</span><span class="p">();</span>
</code></pre></div>
<p>CompilerHttp requires a hosted compiler service. Preferable to host your own compiler service since <a href="https://v8.compiler.aepps.com/api">compiler.aepps.com</a> is planned to be decommissioned. An example of how to run it using <a href="https://github.com/aeternity/aepp-sdk-js/blob/568c291b92c030011ca9e68169f328be6ff79488/docker-compose.yml#L20-L25">docker-compose</a>.</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">compiler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CompilerHttp</span><span class="p">(</span><span class="s1">&#39;https://v8.compiler.aepps.com&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// host your own compiler</span>
</code></pre></div>
<p>Both compiler classes implement the <a href="https://docs.aeternity.com/aepp-sdk-js/v13.2.2/api/classes/CompilerBase.html">same interface</a> that can be used to generate bytecode and ACI without a Contract instance.</p>
<h2 id="3-create-an-instance-of-the-sdk">3. Create an instance of the SDK</h2>
<p>When creating an instance of the SDK you need to provide an account which will be used to sign transactions like <code>ContractCreateTx</code> and <code>ContractCallTx</code> that will be broadcasted to the network.</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Node</span><span class="p">(</span><span class="s1">&#39;https://testnet.aeternity.io&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// ideally host your own node</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">account</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">MemoryAccount</span><span class="p">(</span><span class="nx">SECRET_KEY</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">aeSdk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AeSdk</span><span class="p">({</span>
<span class="w">  </span><span class="nx">nodes</span><span class="o">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;testnet&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">instance</span><span class="o">:</span><span class="w"> </span><span class="nx">node</span><span class="w"> </span><span class="p">}],</span>
<span class="w">  </span><span class="nx">accounts</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">account</span><span class="p">],</span>
<span class="w">  </span><span class="nx">onCompiler</span><span class="o">:</span><span class="w"> </span><span class="nx">compiler</span><span class="p">,</span><span class="w"> </span><span class="c1">// remove if step #2 skipped</span>
<span class="p">});</span>
</code></pre></div>
<p>Note:</p>
<ul>
<li>You can provide multiple accounts to the SDK.</li>
<li>For each transaction you can choose a specific account to use for signing (by default the first account will be used), see <a href="../../transaction-options/">transaction options</a>.</li>
<li>This is specifically important and useful for writing tests.</li>
</ul>
<h2 id="4-initialize-the-contract-instance">4. Initialize the contract instance</h2>
<p>To do so, we need to prepare an options object, which can be done in multiple ways.</p>
<h3 id="by-source-code">By source code</h3>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">sourceCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="c1">// source code of the contract</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sourceCode</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>Note:</p>
<ul>
<li>If your contract includes external dependencies which are not part of the <a href="https://docs.aeternity.com/aesophia/latest/sophia_stdlib">standard library</a> you should initialize the contract using:
  <div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">fileSystem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="c1">// key-value map with name of the include as key and source code of the include as value</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sourceCode</span><span class="p">,</span><span class="w"> </span><span class="nx">fileSystem</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></li>
</ul>
<h3 id="by-path-to-source-code-available-only-in-nodejs">By path to source code (available only in Node.js)</h3>
<p>It can be used with both CompilerCli and CompilerHttp. This way contract imports would be handled automatically, with no need to provide <code>fileSystem</code> option.</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">sourceCodePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;./example.aes&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sourceCodePath</span><span class="w"> </span><span class="p">};</span>
</code></pre></div>
<h3 id="by-aci-and-bytecode">By ACI and bytecode</h3>
<p>If you pre-compiled the contracts you can also initialize a contract instance by providing ACI and bytecode:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">aci</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="c1">// ACI of the contract</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">bytecode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="c1">// bytecode of the contract</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">aci</span><span class="p">,</span><span class="w"> </span><span class="nx">bytecode</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h3 id="by-aci-and-contract-address">By ACI and contract address</h3>
<p>In many cases an application doesn't need to deploy a contract or verify its bytecode. In this case you'd want to initialize the instance by just providing the ACI and the contract address. This is also possible:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">aci</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="c1">// ACI of the contract</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="c1">// the address of the contract</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">aci</span><span class="p">,</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h3 id="create-contract-instance">Create contract instance</h3>
<p>Do it by <code>Contract::initialize</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">contract</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">Contract</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span><span class="w"> </span><span class="p">...</span><span class="nx">aeSdk</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(),</span><span class="w"> </span><span class="p">...</span><span class="nx">options</span><span class="w"> </span><span class="p">});</span>
</code></pre></div>
<p><code>AeSdk:getContext</code> is used to get base options to instantiate contracts. These options include the current account, node, and compiler. They are referenced using Proxy class, pointing to the latest values specified in AeSdk. So, if you change the selected node in the AeSdk instance, it will be also changed in bound contract instances.</p>
<h3 id="options">Options</h3>
<ul>
<li>Following attributes can be provided via <code>options</code> to <code>Contract::initialize</code>:</li>
<li><code>aci</code> (default: obtained via <code>onCompiler</code>)<ul>
<li>The Contract ACI.</li>
</ul>
</li>
<li><code>address</code><ul>
<li>The address where the contract is located at.</li>
<li>To be used if a contract is already deployed.</li>
</ul>
</li>
<li><code>fileSystem</code> (default: {})<ul>
<li>Key-value map with name of the include as key and source code of the include as value.</li>
</ul>
</li>
<li><code>validateBytecode</code> (default: false)<ul>
<li>Compare source code with on-chain version.</li>
</ul>
</li>
<li>other <a href="../../transaction-options/">transaction options</a> which will be provided to <strong>every transaction</strong> that is initiated using the contract instance. You should be aware that:<ul>
<li>For most of these additional options it doesn't make sense to define them at contract instance level.</li>
<li>You wouldn't want to provide an <code>amount</code> to each transaction or use the same <code>nonce</code> which would result in invalid transactions.</li>
<li>For options like <code>ttl</code> or <code>gasPrice</code> it does absolutely make sense to set this on contract instance level.</li>
</ul>
</li>
</ul>
<h3 id="keep-bytecode-and-aci-for-future-use">Keep bytecode and ACI for future use</h3>
<p>After the contract is initialized you can persist values of <code>contract._aci</code> and <code>contract.$options.bytecode</code>.
They can be provided for subsequent contract initializations to don't depend on a compiler.</p>
<h2 id="5-deploy-the-contract">5. Deploy the contract</h2>
<p>If you have a Sophia contract source code that looks like this:</p>
<div class="highlight"><pre><span></span><code><span class="k">contract</span><span class="w"> </span><span class="nf">Increment</span><span class="w"> </span><span class="ow">=</span>

<span class="w">    </span><span class="k">record</span><span class="w"> </span><span class="nb">state</span><span class="w"> </span><span class="ow">=</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="n">count</span><span class="ow">:</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="k">entrypoint</span><span class="w"> </span><span class="n">init</span><span class="p">(</span><span class="n">start</span><span class="ow">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="k">stateful</span><span class="w"> </span><span class="k">entrypoint</span><span class="w"> </span><span class="n">increment</span><span class="p">(</span><span class="n">value</span><span class="ow">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span>
<span class="w">        </span><span class="nb">put</span><span class="p">(</span><span class="nb">state</span><span class="p">{</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="nb">state</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="ow">+</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">})</span>

<span class="w">    </span><span class="k">entrypoint</span><span class="w"> </span><span class="n">get_count</span><span class="p">()</span><span class="w"> </span><span class="ow">=</span>
<span class="w">        </span><span class="nb">state</span><span class="p">.</span><span class="n">count</span>
</code></pre></div>
<p>The contract can be deployed using the <code>contract</code> in two different ways:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">contract</span><span class="p">.</span><span class="nx">$deploy</span><span class="p">([</span><span class="mf">1</span><span class="p">]);</span>
<span class="c1">// or</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">contract</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>

<span class="c1">// after successful deployment you can look up the transaction and the deploy information</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tx</span><span class="p">);</span><span class="w"> </span><span class="c1">// { owner, transaction, address, result, rawTx }</span>
</code></pre></div>
<p>Note:</p>
<ul>
<li>Deployment is only possible if the contract instance was initialized by providing source code or bytecode.</li>
<li>The <code>init</code> entrypoint is a special function which is only called once for deployment, initializes the contract's state and doesn't require the <code>stateful</code> declaration.</li>
<li>In Sophia all <code>public functions</code> are called <code>entrypoints</code> and need to be declared as <code>stateful</code>
  if they should produce changes to the state of the smart contract, see <code>increment(value: int)</code>.</li>
</ul>
<h2 id="6-call-contract-entrypoints">6. Call contract entrypoints</h2>
<h3 id="a-stateful-entrypoints">a) Stateful entrypoints</h3>
<p>According to the example above you can call the <code>stateful</code> entrypoint <code>increment</code> by using one of the following lines:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">contract</span><span class="p">.</span><span class="nx">increment</span><span class="p">(</span><span class="mf">3</span><span class="p">);</span><span class="w"> </span><span class="c1">// recommended</span>
<span class="c1">// or</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">contract</span><span class="p">.</span><span class="nx">increment</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">callStatic</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">});</span>
<span class="c1">// or</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">contract</span><span class="p">.</span><span class="nx">$call</span><span class="p">(</span><span class="s1">&#39;increment&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mf">3</span><span class="p">]);</span>
</code></pre></div>
<p>Note:</p>
<ul>
<li>The <code>callStatic: false</code> option provide an explicit way to tell the SDK to sign and broadcast the transaction.</li>
<li>When using the <code>increment</code> function directly the SDK will automatically determine if it's a <code>stateful</code> entrypoint.</li>
</ul>
<h3 id="b-regular-entrypoints">b) Regular entrypoints</h3>
<p>The æternity node can expose an API endpoint that allows to execute a <code>dry-run</code> for a transaction. You can make use of that functionality to get the result of entrypoints that don't execute state changes. Following lines show how you can do that using the SDK for the <code>get_count</code> entrypoint of the example above:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">contract</span><span class="p">.</span><span class="nx">get_count</span><span class="p">();</span><span class="w"> </span><span class="c1">// recommended</span>
<span class="c1">// or</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">contract</span><span class="p">.</span><span class="nx">get_count</span><span class="p">({</span><span class="w"> </span><span class="nx">callStatic</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">});</span>

<span class="c1">// access the decoded result returned by the execution of the entrypoint</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tx</span><span class="p">.</span><span class="nx">decodedResult</span><span class="p">);</span>
</code></pre></div>
<p>Note:</p>
<ul>
<li>The <code>callStatic</code> option provide an explicit way to tell the SDK to perform a <code>dry-run</code> and to <strong>NOT</strong> broadcast the transaction.</li>
<li>When using the <code>get_count</code> function directly the SDK will automatically determine that the function is not declared <code>stateful</code> and thus perform a <code>dry-run</code>, too.</li>
</ul>
<h3 id="c-payable-entrypoints">c) Payable entrypoints</h3>
<p>You will probably also write functions that require an amount of <code>aettos</code> to be provided. These functions must be declared with <code>payable</code> and (most likely) <code>stateful</code>. Let's assume you have declared following Sophia entrypoint which checks if a required amount of <code>aettos</code> has been provided before it continues execution:</p>
<div class="highlight"><pre><span></span><code><span class="k">payable</span><span class="w"> </span><span class="k">stateful</span><span class="w"> </span><span class="k">entrypoint</span><span class="w"> </span><span class="n">fund_project</span><span class="p">(</span><span class="n">project_id</span><span class="ow">:</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span>
<span class="w">        </span><span class="nb">require</span><span class="p">(</span><span class="nc">Call</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="ow">&gt;=</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="nv">&#39;at</span><span class="w"> </span><span class="n">least</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="n">aettos</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">provided&#39;</span><span class="p">)</span>
<span class="w">        </span><span class="c1">// further logic ...</span>
</code></pre></div>
<p>In order to successfully call the <code>fund_project</code> entrypoint you need to provide at least 50 <code>aettos</code>. You can do this by providing the desired amount of <code>aettos</code> using one of the following lines:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">contract</span><span class="p">.</span><span class="nx">fund_project</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">amount</span><span class="o">:</span><span class="w"> </span><span class="mf">50</span><span class="w"> </span><span class="p">});</span><span class="w"> </span><span class="c1">// recommended</span>
<span class="c1">// or</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">contract</span><span class="p">.</span><span class="nx">$call</span><span class="p">(</span><span class="s1">&#39;fund_project&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">amount</span><span class="o">:</span><span class="w"> </span><span class="mf">50</span><span class="w"> </span><span class="p">});</span>
</code></pre></div>
<h2 id="transaction-options">Transaction options</h2>
<p>As already stated various times in the guide it is possible to provide <a href="../../transaction-options/">transaction options</a> as object to a function of the SDK that builds and potentially broadcasts a transaction. This object can be passed as additional param to each of these functions and overrides the default settings.</p>
<h2 id="sophia-datatype-cheatsheet">Sophia datatype cheatsheet</h2>
<p>Sometimes you might wonder how to pass params to the JavaScript method that calls an entrypoint of your Sophia smart contract.
The conversion between JS and Sophia values is handled by aepp-calldata library.
Refer to <a href="https://www.npmjs.com/package/@aeternity/aepp-calldata#data-types">its documentation</a> to find the right type to use.</p>
<h2 id="generate-file-system-object-in-nodejs">Generate file system object in Node.js</h2>
<p>To do so you can use <a href="https://docs.aeternity.com/aepp-sdk-js/v13.2.2/api/functions/getFileSystem.html">getFileSystem</a> function.
In most cases, you don't need to do it explicitly. Prefer to use <code>sourceCodePath</code> instead <code>sourceCode</code> in
<a href="https://docs.aeternity.com/aepp-sdk-js/v13.2.2/api/classes/_internal_.Contract.html#initialize">Contract::initialize</a>,
and <a href="https://docs.aeternity.com/aepp-sdk-js/v13.2.2/api/classes/CompilerBase.html#compile">compile</a>
instead <a href="https://docs.aeternity.com/aepp-sdk-js/v13.2.2/api/classes/CompilerBase.html#compileBySourceCode">compileBySourceCode</a> in CompilerBase.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>